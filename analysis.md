# Технический анализ и выбор решения

## Цель

Определить всех людей на видео `crowd.mp4`, выделить рамками и сохранить результат. При этом:
- исключить не-людей (например, автобус),
- учесть движения в кадре и плотную толпу,
- добиться максимального качества при ограниченных условиях.

## Попробованные решения

### Модели YOLOv8:
- `yolov8n.pt` (nano)
- `yolov8m.pt` (medium)
- `yolov8l.pt` (large)
- `yolov8x.pt` (x-large)

### Параметры:
- Порог уверенности: 0.25, 0.3, 0.5, 0.0
- Апскейл изображения: 1.0, 1.5, 2.0
- Пробовались разные комбинации моделей + апскейл + порог

## Дополнительные подходы

- Motion map: реализована функция сравнения между кадрами (разность по пикселям), визуализировалась в углу кадра. Позволяла исключать статичные объекты.  
  ❌ Отклонено — так как при движении камеры результат становился нестабильным, добавлялись ложные движения по фону и автобусу.

- Фильтрация по размеру рамки: тестировалась, чтобы убрать автобус  
  ❌ Отклонено — так как терялись реальные рамки.

## Выбор финальной модели

После сравнений было решено использовать:

- Модель: `YOLOv8l`
- Порог: 0.0
- Апскейл: не использовался (1.0)

### Почему YOLOv8l?

- При прочих равных даёт наиболее стабильные результаты в условиях:
  - низкого качества видео,
  - плотной толпы,
  - движения камеры.
- Модель обнаруживала больше реальных людей и дольше удерживала их в кадре, чем nano и x-версии.

## Выводы по результатам работы программы

Программа успешно обрабатывает видео, выделяет людей и сохраняет результат. Были протестированы разные модели, параметры и фильтрации. Использование YOLOv8l без ограничения по порогу дало наилучший результат по полноте обнаружения при приемлемом числе ложных срабатываний.

## Шаги по дальнейшему улучшению

- Использовать трекеры (например, Deep SORT), чтобы удерживать идентификаторы людей между кадрами
- Дообучить YOLOv8l на вручную размеченных фреймах из данного видео
- Повысить качество входного видео путём апскейла или предварительной обработки